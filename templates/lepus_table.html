{% extends "extends_base.html"%}
{% block title%}Bookmarks{%endblock%}

{% block css%}
	<!-- BEGIN PAGE LEVEL PLUGIN STYLES -->
	<link href="/static/plugins/gritter/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>
	<link href="/static/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" />
	<link href="/static/plugins/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css"/>
	<link href="/static/plugins/jqvmap/jqvmap/jqvmap.css" rel="stylesheet" type="text/css"/>
	<link href="/static/plugins/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css"/>
	<!-- END PAGE LEVEL PLUGIN STYLES -->
	<!-- BEGIN THEME STYLES -->
	<link href="/static/css/style-metronic.css" rel="stylesheet" type="text/css"/>
	<link href="/static/css/style.css" rel="stylesheet" type="text/css"/>
	<link href="/static/css/style-responsive.css" rel="stylesheet" type="text/css"/>
	<link href="/static/css/plugins.css" rel="stylesheet" type="text/css"/>
	<link href="/static/css/pages/tasks.css" rel="stylesheet" type="text/css"/>
	<link href="/static/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link href="/static/css/custom.css" rel="stylesheet" type="text/css"/>
	<!-- END THEME STYLES -->
{% endblock %}

{% block bookmarks %}
    <li class="start active">
        <a href="{% url 'index' %}">
        <i class="fa fa-home"></i>
        <span class="title">发布管理</span>
        <span class="selected"></span>
        </a>
    </li>
{% endblock%}

{% block content_row %}
    <!-- BEGIN PAGE HEADER-->
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN PAGE TITLE & BREADCRUMB-->
            <h3 class="page-title">
                PP Deploy <small>-- Let's start here.</small>
            </h3>
            <ul class="page-breadcrumb breadcrumb">
                <li>
                    <i class="fa fa-home"></i>
                    <a href="#">Home</a>
                    <i class="fa fa-angle-right"></i>
                </li>
                <li><a href="#">Dashboard</a></li>
                <!-- <li class="pull-right">-->
                    <!--<div id="dashboard-report-range" class="dashboard-date-range tooltips" data-placement="top" data-original-title="Change dashboard date range">-->
                        <!--<i class="fa fa-calendar"></i>-->
                        <!--<span></span>-->
                        <!--<i class="fa fa-angle-down"></i>-->
                    <!--</div>-->
                <!--</li>-->
            </ul>
            <!-- END PAGE TITLE & BREADCRUMB-->
        </div>
    </div>
    <!-- END PAGE HEADER-->
    <!-- BEGIN DASHBOARD STATS -->
    <div class="clearfix"></div>
    <div class="row " id="test">
        {#    表格1    #}
{#        <div class="col-md-12">#}
{#            <!-- BEGIN SAMPLE TABLE PORTLET-->#}
{#            <div class="portlet box blue">#}
{#                <div class="portlet-title">#}
{#                    <div class="caption" id="title1">xxxs</div>#}
{#                </div>#}
{#                <div class="portlet-body">#}
{#                    <div class="table-responsive" id="table1">#}
{#                        <table class="table table-bordered table-hover" id="myTb1">#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#            <!-- END SAMPLE TABLE PORTLET-->#}
{#        </div>#}
        {#    表格1    #}
        {#    表格2    #}
{#        <div class="col-md-12">#}
{#            <div class="portlet box purple">#}
{#                <div class="portlet-title">#}
{#                    <div class="caption"><i class="fa fa-calendar"></i>Table2</div>#}
{#                    <div class="actions">#}
{#                        <a href="javascript:;" class="btn btn-sm yellow easy-pie-chart-reload"><i class="fa fa-repeat"></i> Reload</a>#}
{#                    </div>#}
{#                </div>#}
{#                <div class="portlet-body" id="table2">#}
{#                    <table class="table table-bordered table-hover" id="myTb2">#}
{#                        <thead>#}
{#                            <tr>#}
{#                                <th>#</th>#}
{#                                <th>Column</th>#}
{#                                <th>Column</th>#}
{#                                <th>Column</th>#}
{#                                <th>Column</th>#}
{#                            </tr>#}
{#                        </thead>#}
{#                        <tbody>#}
{#                            <tr>#}
{#                                <td>1</td>#}
{#                                <td class="active">active</td>#}
{#                                <td class="success">success</td>#}
{#                                <td class="warning">warning</td>#}
{#                                <td class="danger">danger</td>#}
{#                            </tr>#}
{#                            <tr>#}
{#                                <td>2</td>#}
{#                                <td class="active">active</td>#}
{#                                <td class="success">success</td>#}
{#                                <td class="warning">warning</td>#}
{#                                <td class="danger">danger</td>#}
{#                            </tr>#}
{#                            <tr>#}
{#                                <td>3</td>#}
{#                                <td class="active">active</td>#}
{#                                <td class="success">success</td>#}
{#                                <td class="warning">warning</td>#}
{#                                <td class="danger">danger</td>#}
{#                            </tr>#}
{#                            <tr>#}
{#                                <td>4</td>#}
{#                                <td class="active">active</td>#}
{#                                <td class="success">success</td>#}
{#                                <td class="warning">warning</td>#}
{#                                <td class="danger">danger</td>#}
{#                            </tr>#}
{#                        </tbody>#}
{#                    </table>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
        {#    表格2    #}
        {#    生成表格模板    #}

        {#    生成表格模板    #}

    </div>
    <!-- END DASHBOARD STATS -->
{% endblock %}

{% block js %}

	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
	<!-- BEGIN CORE PLUGINS -->
	<!--[if lt IE 9]>
	<script src="/static/plugins/respond.min.js"></script>
	<script src="/static/plugins/excanvas.min.js"></script>
	<![endif]-->
	<script src="/static/plugins/jquery-1.10.2.min.js" type="text/javascript"></script>
	<script src="/static/plugins/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<!-- IMPORTANT! Load jquery-ui-1.10.3.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
	<script src="/static/plugins/jquery-ui/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
	<script src="/static/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="/static/plugins/bootstrap-hover-dropdown/twitter-bootstrap-hover-dropdown.min.js" type="text/javascript" ></script>
	<script src="/static/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="/static/plugins/jquery.blockui.min.js" type="text/javascript"></script>
	<script src="/static/plugins/jquery.cookie.min.js" type="text/javascript"></script>
	<script src="/static/plugins/uniform/jquery.uniform.min.js" type="text/javascript" ></script>
	<!-- END CORE PLUGINS -->
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script src="/static/plugins/jqvmap/jqvmap/jquery.vmap.js" type="text/javascript"></script>
	<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.russia.js" type="text/javascript"></script>
	<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.world.js" type="text/javascript"></script>
	<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.europe.js" type="text/javascript"></script>
	<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.germany.js" type="text/javascript"></script>
	<script src="/static/plugins/jqvmap/jqvmap/maps/jquery.vmap.usa.js" type="text/javascript"></script>
	<script src="/static/plugins/jqvmap/jqvmap/data/jquery.vmap.sampledata.js" type="text/javascript"></script>
	<script src="/static/plugins/flot/jquery.flot.js" type="text/javascript"></script>
	<script src="/static/plugins/flot/jquery.flot.resize.js" type="text/javascript"></script>
	<script src="/static/plugins/jquery.pulsate.min.js" type="text/javascript"></script>
	<script src="/static/plugins/bootstrap-daterangepicker/moment.min.js" type="text/javascript"></script>
	<script src="/static/plugins/bootstrap-daterangepicker/daterangepicker.js" type="text/javascript"></script>
	<script src="/static/plugins/gritter/js/jquery.gritter.js" type="text/javascript"></script>
	<!-- IMPORTANT! fullcalendar depends on jquery-ui-1.10.3.custom.min.js for drag & drop support -->
	<script src="/static/plugins/fullcalendar/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>
	<script src="/static/plugins/jquery-easy-pie-chart/jquery.easy-pie-chart.js" type="text/javascript"></script>
	<script src="/static/plugins/jquery.sparkline.min.js" type="text/javascript"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="/static/scripts/app.js" type="text/javascript"></script>
	<script src="/static/scripts/index.js" type="text/javascript"></script>
	<script src="/static/scripts/tasks.js" type="text/javascript"></script>
	<!-- END PAGE LEVEL SCRIPTS -->

{#    <script>#}
{#		jQuery(document).ready(function() {#}
{#		   App.init(); // initlayout and core plugins#}
{#		   Index.init();#}
{#		   Index.initJQVMAP(); // init index page's custom scripts#}
{#		   Index.initCalendar(); // init index page's custom scripts#}
{#		   Index.initCharts(); // init index page's custom scripts#}
{#		   Index.initChat();#}
{#		   Index.initMiniCharts();#}
{#		   Index.initDashboardDaterange();#}
{#		   Index.initIntro();#}
{#		   Tasks.initDashboardWidget();#}
{#		});#}
{#	</script>#}
{#    <script>#}
{#        jQuery(document).ready(function () {#}
{#            document.getElementById("title1").innerHTML = "xx";#}
{#            var url = 'http://192.168.104.110:8087/query?db=lepus&q=select%20*%20from%20open_tables,open_files,uptime,connect_count%20where%20time%20%3E%20now()%20-%201m';#}
{#            $.getJSON(url,function (data) {#}
{#                //console.log(data.results[0].series);#}
{#                var series = data.results[0].series;//抽取influxdb 的时序数据 list#}
{##}
{#                /*生成列*/#}
{#                var show_th = [];// 列 list#}
{#                for (var i in series[0]['columns']){#}
{#                    //把columns对应的自动取出来 作为列#}
{#                    show_th.push(series[0]['columns'][i]);#}
{##}
{#                }#}
{#                show_th.pop();// 移除最后的元素value，不需要该列#}
{#                for (var i in series) {#}
{#                    show_th.push(series[i]['name']);//把metrics 名 如 uptime 等添加到表头 作为列#}
{#                    /*生成行*/#}
{#                    /*生成行*/#}
{##}
{#                }#}
{#                /*生成列*/#}
{##}
{#                /*生成行*/#}
{#                //var show_td = series[0]['values'][0];#}
{#                //show_td = show_td.slice(0,show_td.length-1);//删除最后一个元素#}
{#                for (var ii in series[i]['values']) {#}
{#                    var show_td = series[i]['values'][ii];#}
{#                    show_td = show_td.slice(0,show_td.length-1);//删除最后一个元素#}
{#                }#}
{#                console.log("show td " + show_td);#}
{#                for (var i in series){#}
{##}
{#                    $.each(series[i],function (k,v) {#}
{#                        //console.log(v);#}
{#                        if (k === "values") {#}
{#                            for (var j in v){#}
{#                                //console.log(v);#}
{#                                //console.log(v[j][v[j].length-1]);#}
{#                                show_td.push(v[j][v[j].length-1]);#}
{#                                //show_td.push(v[j].pop());#}
{#                            }#}
{#                        }#}
{#                    });#}
{#                    //console.log(series[i]['values'][0]);#}
{#                }#}
{##}
{#                /*生成行*/#}
{#                //show_td.push(series[i]['values'][0]);#}
{##}
{#                /*生成行*/#}
{##}
{#                //显示拼好的数据#}
{#                $('#table1').append( show_th + '</br> ' + show_td);#}
{##}
{#                //thead#}
{#                var th1;#}
{#                for (var i in show_th) {#}
{#                    th1+="<th>" + show_th[i] + "</th>";#}
{#                }#}
{#                $('#myTb1').append("<tr>" + th1 + "</tr>");#}
{#                //td#}
{#                //console.log(show_th);#}
{#                //console.log(show_td[0]);#}
{#                var td1;#}
{#                for (var j in show_td) {#}
{#                    console.log("<td>" + show_td[j] + "</td>");#}
{#                    td1+="<td>" + show_td[j] + "</td>";#}
{#                }#}
{#                //console.log(td1);#}
{#                $('#myTb1').append("<tr>" + td1 + "</tr>");#}
{#            });#}
{#        });#}
{#    </script>#}
{#    <script>#}
{#        $().ready(function () {#}
{#            var table='<table class="table table-bordered table-hover"></table>';#}
{#            var columns = { 'columns': [{ 'FieldID': 'Column1', 'Title': 'Info Header 1' }, { 'FieldID': 'Column2', 'Title': 'Info Header2' }, { 'FieldID': 'Column3', 'Title': 'Info Header3' }],}#}
{#            var rows = { 'rows': [{ 'Column1': '1A', 'Column2': '1B', 'Column3': '1C' }, { 'Column1': '2A', 'Column2': '2B', 'Column3': '2C' }] };#}
{#            var th;#}
{#            $.each(columns.columns, function (colIndex, col) {#}
{#                th+="<th>" + col.Title + "</th>";#}
{#            });#}
{#            $('#myTb2').append("<tr>" + th + "</tr>");#}
{#            //行遍历#}
{#            $.each(rows.rows, function (rowIndex, row) {#}
{#            var tr;#}
{#            //列遍历#}
{#            $.each(columns.columns, function (colIndex,col) {#}
{#                tr+='<td class="danger">'+row[col.FieldID]+'</td>'#}
{#            });#}
{##}
{#            $("#myTb2").append('<tr>'+tr+'</tr>');#}
{#        });#}
{#            $('#table2').append(table);#}
{#        })#}
{#    </script>#}
    <script>
        $(document).ready(function () {
            var url = 'http://192.168.104.110:8087/query?db=lepus&q=select%20*%20from%20open_tables,open_files,uptime,connect_count%20where%20time%20%3E%20now()%20-%201m';
            $.getJSON(url,function (data) {
                //console.log(data.results[0].series);
                var series = data.results[0].series;//抽取influxdb 的时序数据 list
                var th;//thead
                var td;//td
                for(var i in series){
                    //var h = "<div class=\"col-md-12\"><div class=\"portlet box blue\"><div class=\"portlet-title\"><div class=\"caption\" id=\"title\">replace</div></div><div class=\"portlet-body\" id=\"table2\"> <table class=\"table table-bordered table-hover\" id=\"myTb3\"></table></div></div></div>";
                    var pd = '<div class="col-md-12"><div class="portlet box blue"><div class="portlet-title"><div class="caption" id="title">'+series[i]["name"]+'</div></div><div class="portlet-body" id="pb'+i+'"></div></div></div>';
                    var tb = '<table class="table table-bordered table-hover" id="tb'+i+'"></table>';
                    //h = h.replace(/replace/,series[i]["name"]);
                    $("#test").append(pd);//生成row
                    //document.getElementById("title").innerHTML = series[i]["name"];
                    $("#pb"+i).append(tb); // 生成table
                    //thead;
                    th='';
                    for(var j in series[i]["columns"]) {
                        th+= "<th>"+series[i]["columns"][j] + "</th>";
                    }
                    $("#tb"+i).append("<tr>" + th + "</tr>");
                    //td

                    var valuelist = series[i]["values"];
                    for(var k in valuelist){
                        td='';
                        for (var v in valuelist[k]){
                            td += "<td>" + valuelist[k][v] + "</td>";
                        }
                        $("#tb"+i).append("<tr>" + td + "</tr>")
                    }

                }
            });
        })
    </script>
{% endblock %}